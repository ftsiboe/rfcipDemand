% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fixed_effect_model_data_prep.R
\name{fixed_effect_model_data_prep}
\alias{fixed_effect_model_data_prep}
\title{Prepare and demean data for fixed-effects models}
\usage{
fixed_effect_model_data_prep(
  data,
  varlist,
  panel,
  time,
  wvar = NULL,
  output = NULL
)
}
\arguments{
\item{data}{A data.frame or data.table containing the data.}

\item{varlist}{Character vector of variable names to be demeaned.}

\item{panel}{Character vector of column name(s) defining the panel identifier.}

\item{time}{Character scalar name of the time variable.}

\item{wvar}{Character scalar name of a variable to keep but \emph{not} demean (optional, default NULL).}

\item{output}{Character scalar name of an output variable whose means are computed but not altered; if NULL, a dummy column named \code{"output"} is created (optional, default NULL).}
}
\value{
A list with components
\itemize{
\item \strong{data}: a data.table containing
\itemize{
\item the original \code{panel}, \code{time}, \code{wvar}, \code{varlist}, and \code{output} columns
\item two mean columns for each of \code{c(output, varlist)}:
\verb{<name>_mean_i} (within-panel) and \verb{<name>_mean} (overall)
}
\item \strong{NFE}: the number of panels with more than one observation
}
}
\description{
This function
\enumerate{
\item Filters to complete cases on the specified panel, time, weight, variables, and output
\item If \code{output} is NULL, creates a dummy output column filled with 1s
\item Drops any panel with only one observation
\item Computes within-panel means for the output + each variable in \code{varlist} (\verb{_mean_i})
\item Computes overall sample means for the same set of variables (\verb{_mean})
\item Replaces each variable in \code{varlist} by \code{value - within_panel_mean + overall_mean}
}
}
\concept{Estimators panel models}
