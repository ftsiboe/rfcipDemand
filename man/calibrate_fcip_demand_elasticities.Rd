% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calibrate_fcip_demand_elasticities.R
\name{calibrate_fcip_demand_elasticities}
\alias{calibrate_fcip_demand_elasticities}
\title{Calibrate FCIP demand elasticities}
\usage{
calibrate_fcip_demand_elasticities(
  calibration_year,
  estimation_window,
  data,
  drawn_pools = NULL,
  disaggregate = NULL
)
}
\arguments{
\item{calibration_year}{Integer. Last year of the estimation window.}

\item{estimation_window}{Integer (>= 1). Number of years ending at \code{calibration_year}.}

\item{data}{\code{data.table}. Input panel. Must include:
\code{commodity_year}, \code{commodity_code}, \code{drawID}, \code{pool},
\code{insurance_plan_code}, \code{price},
\code{net_reporting_level_amount}, \code{coverage_level_percent_aggregate},
\code{rent}, \code{county_acreage},
\code{total_premium_amount}, \code{subsidy_amount}, \code{liability_amount},
\code{tau}, \code{subsidy_rate_65}, \code{subsidy_rate_75}.}

\item{drawn_pools}{Optional \code{data.table} used to filter \code{data} via an inner
join on intersecting columns.}

\item{disaggregate}{Optional character vector of grouping variables passed to
the estimator (e.g., \code{"commodity_code"} or \code{c("state","commodity_code")}).}
}
\value{
\code{data.table} with columns:
\code{disag}, \code{level}, \code{gamma_elasticity}, \code{theta_elasticity}.
}
\description{
Fits a 2-equation FCIP demand system over an estimation window ending in
\code{calibration_year} and returns capped elasticities (-2, 0) by
disaggregation level using \code{\link[=fcip_demand_sys_estimate]{fcip_demand_sys_estimate()}}
}
\details{
Internally, the function (i) restricts \code{data} to the estimation years,
(ii) collapses insurance plan codes and sets \code{price := 1} for non-RP crops,
(iii) constructs log variables, trend and year dummies, and (iv) estimates
the system with \code{rate} endogenous and \code{tau0} as the excluded instrument.
Estimates are truncated to (-2, 0) and returned in wide form.
}
