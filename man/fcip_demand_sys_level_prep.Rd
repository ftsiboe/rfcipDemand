% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fcip_demand_sys_estimate.R
\name{fcip_demand_sys_level_prep}
\alias{fcip_demand_sys_level_prep}
\title{Prepare data for a single level}
\usage{
fcip_demand_sys_level_prep(data, fields, level)
}
\arguments{
\item{data}{Estimation dataset that already contains all columns referenced by \code{fields}.}

\item{fields}{Named list: \code{outcome}, \code{endogenous}, \code{included}, \code{excluded} (opt),
\code{partial} (opt), \code{FE} (logical), \code{disag} (column name).}

\item{level}{One element of the disaggregation levels.}
}
\value{
A list: \code{data} (prepped), \code{NFE} (number of FE), \code{partial} (possibly reduced).
}
\description{
Filters to one disaggregation \code{level}, drops incomplete/invalid rows,
removes constant partials, and optionally demeans via a fixed-effects helper.
}
