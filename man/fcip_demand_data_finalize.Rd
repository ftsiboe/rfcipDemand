% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fcip_demand_data_dispatcher.R
\name{fcip_demand_data_finalize}
\alias{fcip_demand_data_finalize}
\title{Finalize FCIP demand dataset}
\usage{
fcip_demand_data_finalize(df)
}
\arguments{
\item{df}{A \code{data.table} from \code{\link[=fcip_demand_data_reconcile_acreage]{fcip_demand_data_reconcile_acreage()}}.}
}
\value{
Final \code{data.table} ready for estimation.
}
\description{
Applies required log-based validity filters, enforces crop support thresholds, creates
Mundlak pooling identifiers, forms subsidy-share bins, attaches Farm Bill period labels,
derives a simple before/after indicator, and adds state names/abbreviations.
}
\details{
\itemize{
\item \strong{Filters}: drops rows where logs of key variables are \code{0}, \code{NA}, \code{Inf}, or \code{-Inf}.
\item \strong{Support thresholds}: keep crops with >= 30 obs per year for >= 10 years.
\item \strong{Mundlak pooling}: produces \code{pool} and a \code{singleton} flag per cross-sectional key.
\item \strong{Binning}: \code{subsidy_bins} in 0.02 steps from 0.40 to 0.80 (inclusive, with clamp).
\item \strong{Labels}: \code{period_farmbill} factor (pre-1980 ... 2018) and \code{period_combo} ("Before"/"After" 2012).
}
}
\seealso{
Other FCIP Demand Estimation: 
\code{\link{estimate_fcip_instruments}()},
\code{\link{fcip_demand_data_controls}()},
\code{\link{fcip_demand_data_dispatcher}()},
\code{\link{fcip_demand_data_prep_sob}()},
\code{\link{fcip_demand_data_reconcile_acreage}()},
\code{\link{get_yu2018_instrument}()}
}
\concept{FCIP Demand Estimation}
