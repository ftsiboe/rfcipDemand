% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimators_panel_models.R
\name{panel_based_spatial_smoothing_estimator}
\alias{panel_based_spatial_smoothing_estimator}
\title{Panel-based spatial smoothing estimator}
\usage{
panel_based_spatial_smoothing_estimator(
  data,
  output,
  treatment,
  time,
  panel,
  spatialvar
)
}
\arguments{
\item{data}{A \code{data.table} or \code{data.frame} containing panel data.}

\item{output}{Name of the outcome variable (character scalar).}

\item{treatment}{Name of the treatment variable whose spatial effects we estimate (character scalar).}

\item{time}{Name of the time variable (character scalar).}

\item{panel}{Name(s) of the panel identifier variable(s) (character vector).}

\item{spatialvar}{Name of the spatial grouping variable (e.g. county FIPS; character scalar).}
}
\value{
A \code{data.table} with columns:
\itemize{
\item \code{estimate}: the estimated spatial-unit coefficient
\item \code{county_fips}: the spatial unit identifier (5-digit FIPS)
\item \code{state_code}, \code{county_code}: parsed FIPS components
}
}
\description{
This function
\enumerate{
\item Constructs spatially-varying treatment interactions (one variable per spatial unit)
\item Applies within-panel/time fixed-effects demeaning to both outcome and interactions
\item Fits an OLS model by hand (\code{lm.fit}) to recover one coefficient per spatial unit
}
}
\details{
Internally, we
\enumerate{
\item Build \code{treatment_code} = \code{I(spatialvar==code) * treatment} for each spatial unit code.
\item Call \code{fixed_effect_model_data_prep()} to demean the outcome and all \code{treatment_code} variables.
\item Assemble the design matrix \code{X = [output_mean_i, treatment_*]} and response \code{y}.
\item Solve \eqn{\hat\beta = (\tilde X'\tilde X)^{-1}\tilde X'\tilde y} via \code{lm.fit}.
\item Return a row per spatial unit with its coefficient.
}
}
\seealso{
Other Estimators panel models: 
\code{\link{fixed_effect_model_data_prep}()}
}
\concept{Estimators panel models}
