% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fcip_demand_sys_estimate.R
\name{fcip_demand_sys_tests}
\alias{fcip_demand_sys_tests}
\title{System diagnostics: two-way robust first-stage F (+ optional approx. J)}
\usage{
fcip_demand_sys_tests(g, h, data, fit, NFE, approx_j = FALSE)
}
\arguments{
\item{g}{List of system equations (the same formulas passed to \code{systemfit}).}

\item{h}{List of instrument formulas (the same formulas passed to \code{systemfit}).}

\item{data}{Estimation \code{data.frame}/\code{data.table} containing all variables in \code{g}/\code{h}
plus clustering columns \code{pool} and \code{crop_yr}.}

\item{fit}{A fitted \code{systemfit} object (used for \code{N} and \verb{residCov_*} extraction).}

\item{NFE}{Integer: number of absorbed fixed effects (for reporting only).}

\item{approx_j}{Logical, compute the approximate (non-robust) Sargan J as described above.
Default \code{FALSE} (returns \code{NA} for \code{JTest}).}
}
\value{
A \code{data.frame} with rows:
\code{N}, \code{NFE}, \code{residCov_11}, \code{residCov_22}, \code{residCov_12},
\code{JTest}, \code{FTest}.
}
\description{
Produces diagnostics \strong{without} re-running GMM:
\itemize{
\item \strong{FTest}: joint relevance of excluded instruments in each first stage,
using the same two-way (pool by crop year) cluster-robust covariance via
\code{fcip_demand_sys_vcov()} with \code{kind = "lm"}. Reports the \strong{minimum} F
across endogenous regressors.
\item \strong{JTest} (optional): an \emph{approximate} over-identification test computed as
the sum of per-equation Sargan statistics
\eqn{J_k \approx n_k R_k^2} from regressions of equation residuals on that
equation's instrument set. This is a quick check (not the system Hansen J).
}
}
