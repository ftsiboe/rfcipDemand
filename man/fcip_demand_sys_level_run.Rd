% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fcip_demand_sys_estimate.R
\name{fcip_demand_sys_level_run}
\alias{fcip_demand_sys_level_run}
\title{Orchestrate one disaggregation level}
\usage{
fcip_demand_sys_level_run(base_data, fields, level)
}
\arguments{
\item{base_data}{Full estimation dataset (before subsetting to the level).}

\item{fields}{Named list carrying model fields (see \code{fcip_demand_estimation()}),
including \code{disag}, \code{FE}, \code{outcome}, \code{endogenous}, \code{included},
optional \code{excluded}, \code{partial}, \code{restrict}, and \code{name}.}

\item{level}{One value of \code{fields$disag} to estimate for (e.g., a crop name).}
}
\value{
A \code{data.frame} with columns \code{demand}, \code{coef},
\code{Estimate}, \code{StdError}, \code{Zvalue}, \code{Pvalue} and
meta-columns \code{model}, \code{endogenous}, \code{FE}, \code{name},
\code{disag}, \code{level}.
}
\description{
Runs the full pipeline for a single level: level prep -> partial/tilda creation ->
systemfit -> two-way clustered VCOV -> delta-method totals -> optional restricted
step -> diagnostics; then returns a tidy coefficient table with metadata.
}
